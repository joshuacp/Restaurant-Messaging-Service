<link href="../../Content/app.css" rel="stylesheet" type="text/css" /><!-- -->
<link href="../../Content/bootstrap.css" rel="stylesheet" type="text/css" /><!-- -->
<link href="../../Content/bootstrap.min.css" rel="stylesheet" type="text/css" /><!-- -->
<link href="../../Content/Site.css" rel="stylesheet" type="text/css" /><!-- -->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
<script src="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js" type="text/javascript"></script>
<script src="../../Model/Task.js"></script>
<script src="../../Model/Message.js"></script>
<script src="../Scripts/Communication/Communication.js"></script>
<META HTTP-EQUIV="Pragma" CONTENT="no-cache">


<div class="navbar navbar-inverse navbar-fixed-top">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/Home/Show">Shift Link</a>
        </div>
        <div class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
                <li><a href="/Home/Show">Home</a></li>
            </ul>
        </div>
    </div>
</div>

<div class="container">
  <h1>Welcome!</h1>

  <ul class="nav nav-tabs">
    <li class="active">
      <a href="#message-tab" data-toggle="tab">
        <i class="fa fa-envelope"></i>
        &nbsp;&nbsp;MSG
      </a>
    </li>
    <li>
      <a href="#calendar-tab" data-toggle="tab">
        <i class="fa fa-calendar"></i>
        &nbsp;&nbsp;Calendar
      </a>
    </li>
    <li>
      <a href="#task-tab" data-toggle="tab">
        <i class="fa fa-check-square-o"></i>
        &nbsp;&nbsp;Tasks
      </a>
    </li>
  </ul>
  <div class="tab-content stacked-content">

    <div class="tab-pane fade active in" id="message-tab">
      <h3>Messages</h3>
      <hr><br>

      <div class="container" id="container">
        <div class="col-md-9">
          <label for="NewMessage">New Message</label>
          <div>
              <input id="NewMessage" type="text">
          </div>
          <br>
          <button id="submitMessage" onclick="submitMessage()" class="btn btn btn-primary">
            <script>
              function submitMessage() {
                var com = new Communication();
                var message = new Message();
                console.log($('#NewMessage').val());

                message.message = $('#NewMessage').val();
                console.log(message);
                com.doPost("/create/message", JSON.stringify(message),"Post",function(success){
                    console.log("SUCCESS");
                });
                console.log('done');
              }
            </script>
              Create Message
          </button>
        </div>
      </div>
      <br><br>

      <div class="table-responsive">
        <table class="table table-bordered table-highlight table-hover" id="tasktable">
          <thead>
            <tr>
              <th class="col-md-3">From</th>
              <th>Message</th>
            </tr>
          </thead>

          <tbody></tbody>

          <script type="text/javascript">
            var com = new Communication();
            //var messages = JSON.parse(com.doGet("/get/messages"));
            var tbody = $('tbody');
            //foreach(Task message in mesaages){
              var tr=document.createElement('tr');

              var tdName=document.createElement('td');
              tdName.appendChild(document.createTextNode("message.Details"))
              tr.appendChild(tdName)

              var tdMessage=document.createElement('td');
              tdMessage.appendChild(document.createTextNode("message.Issuer"));
              tr.appendChild(tdMessage);

              tbody.append(tr);
            //}
          </script>

        </table>
      </div>


    </div>

    <div class="tab-pane fade" id="calendar-tab">
      <h3>Calendar</h3>
      <hr><br>
    </div>

    <div class="tab-pane fade" id="task-tab">
      <h3 class="">Tasks</h3>
      <hr><br>

      <div class="container" id="container">
        <div class="col-md-9">
          <label for="NewTask">New Task</label>
          <div>
              <input id="NewTask" type="text">
          </div>
          <br>
          <button id="submitTask" onclick="submitTask()" class="btn btn btn-primary">
            <script>
              function submitTask() {
                var com = new Communication();
                var task = new Task();
                console.log($('#NewTask').val());

                task.details = $('#NewTask').val();
                task.completed = false;
                console.log(task);
                com.doPost("/create/task", JSON.stringify(task),"Post",function(success){
                    console.log("SUCCESS");
                });
                console.log('done');
              }
            </script>
              Create Task
          </button>
        </div>
      </div>
      <br><br>

      <div class="table-responsive">
        <table class="table table-bordered table-highlight table-hover" id="tasktable">
          <thead>
            <tr>
              <th>Details</th>
              <th>Issuer</th>
              <th>Status</th>
            </tr>
          </thead>

          <tbody></tbody>

          <script type="text/javascript">
            var com = new Communication();
            var getter = com.doGet("/get/tasks");
            if(getter != null){
              var tasks = JSON.parse(getter);
            }

            var tbody = $('tbody');
            foreach(Task task in tasks){
              var tr=document.createElement('tr');

              var tdDetails=document.createElement('td');
              tdDetails.appendChild(document.createTextNode("task.Details"))
              tr.appendChild(tdDetails)

              var tdIssuer=document.createElement('td');
              tdIssuer.appendChild(document.createTextNode("task.Issuer"));
              tr.appendChild(tdIssuer);

              var tdStatus=document.createElement('td');
              var checkbox = document.createElement("INPUT");
              checkbox.setAttribute("type", "checkbox");
              if(task.completed){
                checkbox.setAttribute("checked", true);
              }
              tdStatus.appendChild(checkbox);
              tdStatus.appendChild(document.createTextNode("  Complete"))
              tr.appendChild(tdStatus)

              tbody.append(tr);
            }
          </script>

        </table>
      </div>
    </div>

  </div>
</div>

<footer class="text-center">&copy; 2014 - Shift Link, Inc.</footer>
